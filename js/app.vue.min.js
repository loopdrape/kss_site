!function(e){"use strict";return app&&app.Vue?(app.useVuer(),void app.vuer.setProp({_positionTrackings:[],positionTracking:function(t){t.$pt=e("<div/>").addClass("position-tracker").insertBefore(t.$self),t.state.fixStart=parseInt(t.$self.data("fix")),t.onChangeState(function(e){app.isNumber(e.current)&&(e.isFixed=e.current>=e.fixStart&&e.current<=(e.fixEnd||0),this.$self.toggleClass("is-fixed",e.isFixed),delete e.current)}),this._positionTrackings.push(t.name)},updPtFixEnd:function(e,t){var i=this.get(e);return i.isReady?i.setState("fixEnd",i.$pt.offset().top-t):void 0},onScroll:function(e,t){var i=this.get(e);return i.isReady?i.setState("current",t):void 0},onReady:function(t){t.on("resize",function(t,i){var n=e(this),o=e.data(this,"vue"),a=n.height();!!o._resizeTimer&&clearTimeout(o._resizeTimer),o._resizeTimer=setTimeout(function(){o._positionTrackings.forEach(function(e){this.updPtFixEnd(e,a)},o)},i?0:100)}).on("scroll",function(){var t=e(this),i=e.data(this,"vue"),n=t.scrollTop();i._positionTrackings.forEach(function(e){this.onScroll(e,n)},i)})}}).add("body",{selector:function(){return e(document.body)},onReady:function(e){app.isTop=function(e){return e.indexOf("page-day")<=0&&e.indexOf("page-tag")<=0&&e.indexOf("page-search")<=0&&e.indexOf("page-permalink")<=0}(e.get(0).className.split(" ")),app.isTop&&e.addClass("page-top"),this._addDeviceInfoClass()._initSmoothScroll()._attachHoverStatus()._attachLink4SP(e)},_addDeviceInfoClass:function(){var e=[];return e.push("device-"+app.device[0]),app.device.length>1&&e.push("os-"+app.device[1]),e.push("browser-"+app.browser[0]),app.browser.length>1&&e.push(app.browser.join("")),this.$self.addClass(e.join(" ")),this},_initSmoothScroll:function(){return this.$self.on("click","a",function(t){var i,n;this.hash&&this.origin+this.pathname===app.URL&&(t.preventDefault(),i=e.data(t.delegateTarget,"vue"),n=e(this.hash),e("html, body").animate({scrollTop:n.offset().top-20},{complete:app.isFunction(i.smoothScrollCallBack)?function(){!!i._smoothScrollTimer&&clearTimeout(i._smoothScrollTimer),i._smoothScrollTimer=setTimeout(i.smoothScrollCallBack.bind(n),100)}:null,duration:600}))}),this},smoothScrollCallBack:function(){app.cnLog("scrolled.",this.offset().top)},_attachHoverStatus:function(){return this.getVuer().$window.on("pageshow",function(){e(".is-hover").removeClass("is-hover")}),this.hoverDecayTime="sp"===app.device[0]?250:0,this.$self.on("mouseenter touchstart","a:not(.btn), .btn, .hoverTarget",function(){e(this).addClass("is-hover")}).on("mouseleave touchend","a:not(.btn), .btn, .hoverTarget",function(t){var i=e.data(t.delegateTarget,"vue");setTimeout(e.fn.removeClass.bind(e(this),"is-hover"),i.hoverDecayTime)}),this},_attachLink4SP:function(t){return t.on("click",".link4SP",function(){var t=e(this),i={href:t.data("href"),blank:"_blank"===t.data("target")?!0:!1};"sp"===app.device[0]&&(i.blank?window.open(i.href):location.href=i.href)}),this},onChangeState:function(e){"boolean"==typeof e.lockScroll&&this.$self.toggleClass("is-lock-scroll",e.lockScroll)}}).add("siteHeader",{selector:"#site_header",onReady:function(t){t.on("click",".icon-keeshkas",function(t){var i=e.data(t.delegateTarget,"vue");t.preventDefault(),i.getOther("nav").getState("isFixed")?i.getOther("switchNavLinks").$self.trigger("click",[!0]):i.getOther("scrollToPageTop").execScroll()})}}).add("siteBody",{selector:"#site_body",onReady:function(){},onChangeState:function(e){this.$self.attr({"data-view":e.view||""})}}).add("siteFooter",{selector:"#site_footer",onReady:function(){},fixBottom:function(){var e=this;return this.$wrap=this.$self.parent(),!!this.$wrap.length&&(this.$wrap=this.$wrap.eq(0)),"static"===this.$wrap.css("position")&&this.$wrap.css("position","relative"),this.$wrap.isBorderBox="border-box"===this.$wrap.css("box-sizing")?!0:!1,this.updStyle=function(){var e={"min-height":this.getVuer().$window.outerHeight()-1,"padding-bottom":this.$self.outerHeight(!0)};return this.$wrap.isBorderBox||(e["min-height"]-=e["padding-bottom"]),this.$wrap.css(e),this},this.updStyle(),this.getVuer().$window.on("resize",function(t,i){e._fixTimer&&clearTimeout(e._fixTimer),e._fixTimer=setTimeout(e.updStyle.bind(e),i?0:50)}),this.$self.css({position:"absolute",bottom:0,left:0}).addClass("fixed-bottom"),this}}).add("nav",{selector:"#site_nav",onReady:function(){this.getVuer().positionTracking(this)},onChangeState:function(e){this.$self.toggleClass("lock-fixed",!!e.isLockFixed)}}).add("switchNavLinks",{selector:"#show_nav_links",onReady:function(t){this.$link=t.closest(".btn-toggle"),t.on("change",function(t,i){var n=e.data(this,"vue"),o=app.isString(i)?i:"posts";n.setState("isChecked",this.checked),n.getOther("nav").setState("isLockFixed",this.checked),n.getOther("siteBody").setState("view",this.checked?"":o)})},onChangeState:function(e){this.$link.toggleClass("is-checked",!!e.isChecked)}}).add("searchBox",{selector:"#search_box",onReady:function(t){t.on("focus","input",function(t){var i=e.data(t.delegateTarget,"vue");i.setState("focus",!0)}).on("blur","input",function(t){var i=e.data(t.delegateTarget,"vue");i.setState("focus",!1)}),this.getOther("nav").onChangeState(function(e){this.getOther("searchBox").setState("rockOpen",!!e.isFixed)}),this.state.focus=!1},onChangeState:function(e){this.$self.toggleClass("is-focus",e.focus).toggleClass("is-rockOpen",e.rockOpen)}}).add("btnSearch",{selector:function(){return this.getOther("searchBox").$self.find(".btn-search")},onReady:function(){this.getOther("searchBox").onChangeState(function(e){var t;t=e.rockOpen?"search_submit":e.focus?"search_submit":"inp_q",this.getOther("btnSearch").setState({htmlFor:t})})},onChangeState:function(e){!!e.htmlFor&&this.$self.attr("for",e.htmlFor)}}).add("scrollToPageTop",{selector:"#scroll_to_pageTop",onReady:function(){this.getVuer().positionTracking(this)},execScroll:function(){this.$self.children(".btn-exec").trigger("click",[!0])}}).add("secTitle",{selector:"#sec_title",onReady:function(t){var i;return t?app.isTop?(this.getOther("body").onChangeState(function(e){e.wndH&&e.ttlH&&(e.t=.6*e.wndH<e.ttlH?e.ttlH:"",app.cnLog("body.onChangeState",e),this.$self.css("padding-top",e.t),delete e.t)}),this.$mainBG=t.children(".main-background"),this.getVuer().$window.on("resize",function(t,i){var n=e.data(this,"vue"),o=n.get("secTitle");!!o._timer&&clearTimeout(o._timer),o._timer=setTimeout(function(){n.get("body").setState({wndH:n.$window.height(),ttlH:o.$mainBG.height()})},i?0:100)}),i=[],i.push(e.Deferred(function(t){return e("#main_bg_video").on("load",t.resolve),setTimeout(t.resolve,1e3),t.promise()})),i.push(e.Deferred(function(t){return e("#main_bg_image").on("load",t.resolve),setTimeout(t.resolve,1e3),t.promise()})),e.when.apply(e,i)):void t.children(".main-title").remove():!1}}).add("secDescription",{selector:"#sec_description",onReady:function(t){this._delay=1e3*parseFloat(t.css("transition-duration")),t.on("click",".btn-close",function(t){t.preventDefault();var i=e.data(t.delegateTarget,"vue");i.getOther("siteBody").setState("view","").then(function(){var t=e.Deferred();return setTimeout(t.resolve,this._delay),t.promise()}.bind(this)).then(function(){i.getOther("siteBody").setState("view","posts")})})}}).add("showDescription",{selector:"#show_description",onReady:function(t){t.on("click",function(t){t.preventDefault();var i=e.data(t.delegateTarget,"vue");i.getOther("switchNavLinks").$self.prop({checked:!1}).trigger("change",["description"])})}})):!1}(window.jQuery||window.$);