!function(e,t){"use strict";return e?t?(e.Vue=function(){this._initialize.apply(this,arguments)},e.Vue.prototype={_ver:"1.0.0",$self:!1,$template:!1,_initialize:function(e,t){var i={name:"",selector:"",createTemplate:function(){},onReady:function(){},onChangeState:function(){},render:function(){},renderComplete:function(){}};return i=e.isObject(t)?t:{},!i.name&&(i.name=String((new Date).valueOf())),this._wAB=e,this.isReady=!1,this.state={},this._onReadyCallbacks=[],i.onReady&&(this.onReady(i.onReady),delete i.onReady),this._onChangeStateCallbacks=[],i.onChangeState&&(this.onChangeState(i.onChangeState),delete i.onChangeState),this.setProp(i)},setProp:function(e,t,i){return e?this._wAB.isString(e)?this._setProp(e,t,!!i):this._wAB.isObject(e)&&(i=t===!0,e.onReady&&(this.onReady(e.onReady),delete e.onReady),e.onChangeState&&(this.onChangeState(e.onChangeState),delete e.onChangeState),Object.keys(e).forEach(function(t){this._setProp(t,e[t],i)},this)):this._wAB.cnWarn((this.name||"Vue")+".setProp() ... arguments[0] is required."),this},_setProp:function(e,t,i){return this.hasOwnProperty(e)&&!i?this._wAB.cnWarn((this.name||"Vue")+".setProp() ... '"+e+"' is already defined."):this[e]=t,this},_templateAreaPropTo:"_wAB",getTemplateArea:function(e){var i;return this[this._templateAreaPropTo]._$templateArea||(this[this._templateAreaPropTo]._$templateArea=t("<div/>").addClass("vue-template-area").hide().appendTo(document.body)),i=this[this._templateAreaPropTo]._$templateArea,e===!1?i.get(0):i},getReady:function(){var i,e=t.Deferred();return this.isReady?(this._wAB.cnLog("** "+this.name+".getReady() is already executed."),e.resolve().promise()):this.isGettingReady?(this._wAB.cnLog("** "+this.name+" is getting ready now..."),e.resolve().promise()):(this.isGettingReady=!0,!!this.selector&&function(){var e;this._wAB.isString(this.selector)?e=t(this.selector):this._wAB.isFunction(this.selector)&&(e=this.selector.call(this)),e&&e instanceof t&&e.length&&(void 0!==e.attr("data-vue-template")?(this.$template=e,e=t("<var/>").attr("data-vue",this.name).insertBefore(this.$template),this.$self=e):(this.$self=e,t.data(this.$self.get(0),"vue",this)))}.call(this),this._wAB.isFunction(this.createTemplate)&&function(){var e;e=this.createTemplate.call(this),e&&e instanceof t&&e.length&&(this.$template=e)}.call(this),!!this.$template&&this.$template.appendTo(this.getTemplateArea()),i=this._onReadyCallbacks.map(function(e){return e.call(this,this.$self)},this),t.when.apply(t,i).then(function(){this.isReady=!0,delete this.isGettingReady,e.resolve.apply(e,Array.prototype.slice.call(arguments,0))}.bind(this),e.reject.bind(e)),e.promise())},onReady:function(e){return this._wAB.isFunction(e)&&(this.isReady?e.call(this,this.$self,this.$template):this._onReadyCallbacks.push(e)),this},setState:function(e,t){var i=!1;return this.isReady?e?this._wAB.isString(e)?(this.state[e]=t,i=!0):this._wAB.isObject(e)&&(Object.assign(this.state,e),i=!0):this._wAB.cnWarn(this.name+".setState() ... arguments[0] is required."):this._wAB.cnWarn(this.name+".setState() ... getReady() didn't execute yet."),i&&this.changeState().then(function(){!!this.$self&&this.$self.trigger("changeState")}.bind(this)),this},getState:function(e){return this.isReady?e&&this._wAB.isString(e)?this.state[e]:this.state:(this._wAB.cnWarn(this.name+".getState() ... getReady() didn't execute yet."),!1)},changeState:function(){var i,e=t.Deferred();return i=this._onChangeStateCallbacks.map(function(e){return e.call(this,this.state)},this),t.when.apply(t,i).then(function(){var t=this._execRender(Array.prototype.slice.call(arguments,0));e.resolve(t)}.bind(this),e.reject.bind(e)),e.promise()},onChangeState:function(e){return this._wAB.isFunction(e)&&this._onChangeStateCallbacks.push(e),this},getCloneFromTemplate:function(){var e=!1;return this.$template&&(e=this.$template.clone().attr({id:null,"data-vue-template":null}).removeClass("template")),e},_execRender:function(){var i,e=Array.prototype.slice.call(arguments,0);return e.unshift(this.getCloneFromTemplate()),i=this.render.apply(this,e),this._wAB.isFunction(this.renderComplete)&&this.renderComplete(i),this.$self&&i&&(i instanceof t||!this._wAB.isElement(i)&&!this._wAB.isString(i)||(i=t(i)),i instanceof t&&i.length&&(this.$self.replaceWith(i),this.$self=i)),i},render:function(){},renderComplete:function(){}},e.initVue=function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(this.Vue,this),this.newCall.apply(this,e)},void(e.useVuer=function(){return this.vuer={_wAB:this,_vueMap:{},isReady:!1,getReady:function(){var i,e=t.Deferred();return this.isReady?(this._wAB.cnLog("** vuer.getReady() is already executed."),this):(i=Object.keys(this._vueMap).map(function(e){return this._vueMap[e]instanceof this._wAB.Vue?this._vueMap[e].getReady():void 0},this),t.when.apply(t,i).then(function(){var t=Object.keys(this._vueMap),i={};Array.prototype.slice.call(arguments,0).forEach(function(e,n){Array.isArray(e)&&(e=e.filter(function(e){return!!e}),!e.length&&(e=void 0)),void 0===e||(i[t[n]]=e)}),this.isReady=!0,e.resolve(i)}.bind(this),e.reject.bind(e)),e.promise())},add:function(e,i,n){var a;return this._wAB.isString(e)?e in this._vueMap&&!n?(this._wAB.cnWarn("vuer.add() ... '"+e+"' is already defined."),this):(this._wAB.isObject(i)||(i={}),Object.assign(i,{name:e,_templateAreaPropTo:"_vuer",getCloneFromTemplate:function(){var e=this,i=this._wAB.Vue.prototype.getCloneFromTemplate.call(this);return i&&i.find("[data-vue]").each(function(){var s,i=t(this),n=i.data("vue"),a=e.getOther(n);a&&(a.setProp("$self",i,!0),s=e.getState(n),e._wAB.isObject(s)&&a.setState(s))}),i}}),a=this._wAB.initVue(i),this._vueMap[a.name]=a,this):(this._wAB.cnWarn("vuer.add() ... arguments[0] is must be string.",typeof e),this)},get:function(e){return this._vueMap[e]},render:function(){}},Object.assign(this.Vue.prototype,{_vuer:this.vuer,getVuer:function(){return this._vuer},getOther:function(e){return this.getVuer().get(e)}}),this})):(console.warn("'$' isn't included."),!1):(console.warn("'WebAppBase' isn't included."),!1)}(window.WebAppBase.prototype,window.jQuery||window.$);
