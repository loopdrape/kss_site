!function(){"use strict";var e="2.1";window.Klass=function(){var e,t,n;e=function(){},e.prototype={isObject:function(e){return"object"==typeof e&&!Array.isArray(e)},isArray:function(e){return Array.isArray(e)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isInteger:function(e){return this.isNumber(e)&&Math.round(e)===e},isFunction:function(e){return"function"==typeof e},isElement:function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}},t=function(e){if(void 0===e)return Object.assign({},window.Klass._klassMap);if(!window.Klass.isString(e))throw new TypeError("arguments[0] must be string.");return window.Klass._klassMap[e]};for(n in e.prototype)t[n]=e.prototype[n];return t.inherits=function(e,t){if(void 0===e||null===e)throw new TypeError("The constructor to `inherits` must not be null or undefined.");if(void 0===t||null===t)throw new TypeError("The super constructor to `inherits` must not be null or undefined.");if(void 0===t.prototype)throw new TypeError("The super constructor to `inherits` must have a prototype.");return e.super_=t,"function"==typeof Object.__proto__?Object.setPrototypeOf(e.prototype,t.prototype):this.goog.inherits(e,t),this},t.isFunction(Object.__proto__)||(t.goog={inherits:function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),t._klassMap={Klass:e},e.prototype.klass="Klass",t.extends_=function(e,t,n){var r;if(!this.isString(t))throw new TypeError("arguments[1] must be string.");if(r=this._klassMap[t],!r)throw new Error("'"+t+"' is undefined.");return this.inherits(e,r),e.parent=r.prototype,this.isObject(n)&&Object.keys(n).forEach(function(t){e.prototype[t]=this[t]},n),e},t.create=function(e,t){var n;if(!this.isString(e))throw new TypeError("arguments[0] must be string.");if(this._klassMap[e])throw new Error("'"+e+"' is already defined.");return this.isObject(t)||(t={}),n=function(){this._initialize.apply(this,arguments)},n.extends_=function(e,t){return window.Klass.extends_(this,e,t)},this._klassMap[e]=n,Object.keys(t).length&&(!t._initialize&&(t._initialize=function(){}),this.extends_(n,"Klass",t)),n.prototype.klass=e,n},t.new_=function(e){var t=Array.prototype.slice.call(arguments,0);if(!this.isString(e))throw new TypeError("arguments[0] must be string.");return t[0]=this(e),new(Function.prototype.bind.apply(t[0],t))},t}(),window.Klass.create("Console",{_initialize:function(){return this.off("log").off("warn")},colors:{blue:"#0862b1",green:"#0c861a",orange:"#de6d0b",red:"#e2291e",purple:"#920ea5",gray:"#aaa",grey:"#aaa"},_attachColors:function(e,t){var n=this[e],r="ie"===window.Klass("Console").browser[0];return Object.keys(this.colors).forEach(function(i){n[i]=t?r?console[e].bind(console):console[e].bind(console,"%c%s","color:"+this[i]+";"):function(){}},this.colors),this},on:function(e){if(!this.isString(e))throw new TypeError("arguments[0] must be string.");return this.isFunction(console[e])?(this[e]=console[e].bind(console),["log","warn"].indexOf(e)>=0&&this._attachColors(e,!0)):this.off(e),this},off:function(e){if(!this.isString(e))throw new TypeError("arguments[0] must be string.");return this[e]=function(){},["log","warn"].indexOf(e)>=0&&this._attachColors(e,!1),this}}),function(e){e.browser=function(){var e=window.navigator.userAgent.toLowerCase(),t=window.navigator.appVersion.toLowerCase(),n=[];return-1!=e.indexOf("msie")?(n.push("ie"),-1!=t.indexOf("msie 10.")?n.push(10):-1!=t.indexOf("msie 9.")?n.push(9):(n.push(8),n.push("under"))):-1!=e.indexOf("trident")?(n.push("ie"),n.push(11),n.push("over")):-1!=e.indexOf("chrome")?n.push("chrome"):-1!=e.indexOf("safari")?n.push("safari"):-1!=e.indexOf("opera")?n.push("opera"):-1!=e.indexOf("firefox")&&n.push("firefox"),n}(),e.device=function(){var e=window.navigator.userAgent.toLowerCase(),t=["pc"];return-1!==e.indexOf("iphone")||-1!==e.indexOf("ipad")||-1!==e.indexOf("ipod")?(t[0]="sp",t.push("ios")):-1!==e.indexOf("android ")?(t[0]="sp",t.push("android")):-1!==e.indexOf("windows phone ")&&(t[0]="sp",t.push("windows")),t}()}(window.Klass("Console")),window.csl=window.Klass.new_("Console"),window.WebAppBase=window.Klass.create("WebAppBase",{_ver:e,name:"",ACTION_URL:"",_environment:"",_GET:{},browser:window.Klass("Console").browser,device:window.Klass("Console").device,_initialize:function(e,t){this.isString(e)?"http"===e.slice(0,4)||"."===e.slice(0,1)||"/"===e.slice(0,1)?this.ACTION_URL=e:this.name=e:"object"!=typeof e||t||(t=e),this.URL=location.origin+location.pathname,this._GET=this.parseQueryString(window.location.search),this.config={},t||(t=location.host),function(){var e,n;e=this.URL.split("/"),"object"==typeof t?(t.dev||(t.dev="dev"),t.test||(t.test="test"),t.prod||(t.prod=location.host),n=e.lastIndexOf(t.dev),this._environment="dev",0>n&&(n=e.lastIndexOf(t.test),this._environment="test",0>n&&(n=e.lastIndexOf(t.prod),this._environment="prod"))):this.isString(t)&&(n=e.lastIndexOf(t),this._environment="prod"),this.config.rootpath=e.slice(0,n+1).join("/")+"/",this.config.rootdir=e[n]}.call(this),this.config.rootpath&&function(){var t,e={};if(e.pageDirLv=this.URL.replace(this.config.rootpath,"").split("/").length,1===e.pageDirLv)this._relativePath=".";else{for(e.arr=[],e.len=e.pageDirLv-1,t=0;t<e.len;t++)e.arr.push("..");this._relativePath=e.arr.join("/")}}.call(this)},cnLog:function(){return window.csl.log.apply(this,arguments)},cnWarn:function(){return window.csl.warn.apply(this,arguments)},enablePushState:history&&history.pushState&&void 0!==history.state?!0:!1,pushState:function(e,t){if(this.enablePushState){try{history.pushState(e,this.name,t)}catch(n){return csl.warn("history.pushState",n),!1}return this}return!1},replaceState:function(e,t){if(this.enablePushState){try{history.replaceState(e,this.name,t)}catch(n){return csl.warn("history.replaceState",n),!1}return this}return!1},getVersion:function(){return this._ver},ajaxErrorCallback:function(e,t,n){this instanceof window.WebAppBase&&"prod"!==this._environment&&csl.warn("通信失敗",e.responseText,e.status,t,n.message);var r="サーバーとの通信に失敗しました";return r+="<br><b>Status</b>: "+e.status,t&&(r+=" ("+t+")"),"prod"!==this._environment&&(e.responseText&&(r+="<br>"+e.responseText),n.message&&(r+="<br><br><b>Error message</b>: "+n.message)),r},zeroPadding:function(e,t){return(new Array(t).join("0")+e).slice(-t)},hasHalfKana:function(e){return this.isString(e)?/[ｦｧ-ｯｰｱ-ﾝﾞﾟ]/.test(e):(csl.warn("hasHalfKana","arguments[0] must be string."),!1)},hasHalfChar:function(e,t){if(!this.isString(e))return csl.warn("hasHalfChar","arguments[0] must be string."),!1;if(this.isNumber(t)||(t=0),!t&&this.hasHalfKana(e))return!0;var n,r,i=e.length,s=/[｡｢｣､･]/;for(r=0;i>r;r++)if(n=e.charAt(r),window.escape(n).length<6||s.test(n))return!0;return!1},hasFullChar:function(e){if(!this.isString(e))return csl.warn("hasFullChar","arguments[0] must be string."),!1;var t,n,r=e.length,i=/[｡｢｣､･]/;for(n=0;r>n;n++)if(t=e.charAt(n),window.escape(t).length>=6&&!i.test(t)&&!this.hasHalfKana(t))return!0;return!1},fileSizeToString:function(e){if(!this.isNumber(e))return csl.warn("pathInfo","arguments[0] must be number."),!1;var t=e/1024;return t>=1024?(t/=1024,t=t>=1024?String(Math.ceil(t/1024))+"GB":String(Math.ceil(t))+"MB"):t=String(Math.ceil(t))+"KB",t},pathInfo:function(e){if(!this.isString(e))return csl.warn("pathInfo","arguments[0] must be string."),!1;var t={_a:document.createElement("a")};return t._a.href=e||"./",e=e.replace(t._a.search,"").replace(t._a.hash,""),t.delimiter=new RegExp("/").exec(e)?"/":"\\",t.pathParts=e.split(t.delimiter),t.basename=t.pathParts.slice(-1)[0],t.arr=t.basename.split("."),t.idx=t.arr.length-1,{dirname:t.pathParts.slice(0,-1).join("/"),basename:t.basename,extension:t.arr.length>1?t.arr[t.idx]:"",filename:t.arr.slice(0,t.idx).join("."),search:t._a.search,hash:t._a.hash}},replacePathinfo:function(e,t){if(!this.isString(e)||!this.isString(t))return e;var n=this.pathInfo(t);return e=e.replace(/\{dirname\}/g,n.dirname),e=e.replace(/\{basename\}/g,n.basename),e=e.replace(/\{extension\}/g,n.extension),e=e.replace(/\{filename\}/g,n.filename)},parseQueryString:function(e){if(!this.isString(e))return csl.warn("parseQueryString","arguments[0] must be string."),!1;var n,r,i,s,t={};if(e.indexOf("?")<0&&(e="?"+e),n=this.pathInfo(e).search,n=n.replace(/^\?/,""))for(n=n.split("&"),r=0;r<n.length;r++){for(s=n[r].split("="),i=0;i<s.length;i++)s[i]=decodeURIComponent(s[i]);t[s[0]]=s.slice(1).join("=")}return t},createQueryString:function(e){if("object"!=typeof e)return csl.warn("createQueryString","arguments[0] must be object."),!1;var r,t="",n=[];for(r in e)n.push(r+"="+encodeURIComponent(e[r]));return n.length&&(t="?"+n.join("&")),t},textareaParse:function(e,t){if(!this.isString(e))return csl.warn("textareaParse","arguments[0] must be string."),!1;"boolean"==typeof t||(t=!1);var o,n=e.split(/\r\n|\r|\n/),r=n.length,i=[],s=document.createElement(t?"p":"span");for(o=0;r>o;o++)n[o]||(n[o]="&nbsp;"),s.innerHTML=n[o],i.push(s.outerHTML);return i.join(t?"":"<br/>")},preloadedImgs:{},imgPreload:function(e,t){var n=this,r=this.preloadedImgs,i=new Image;i.src=e,i.onerror=function(r){n.cnWarn("preload error: "+e),t(!1,e,i,r)},i.onload=function(n){r[e]=i,"function"==typeof t&&t(!0,e,i,n)}},_scrollTop:0,saveScroll:function(e){return this.isNumber(e)||(e=window.pageYOffset),this._scrollTop=e,this},loadScroll:function(){return window.scrollTo(window.pageXOffset,this._scrollTop),this},setScroll:function(e){return this.isNumber(e)?window.scrollTo(window.pageXOffset,e):csl.warn(String(e)+"isn't Number."),this},encodeRFC:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},decodeRFC:function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},newCall:function(e){return new(Function.prototype.bind.apply(e,arguments))}})}();