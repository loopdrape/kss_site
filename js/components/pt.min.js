!function(e){"use strict";app.positionTracker={_targets:[],tracking:function(t,i,s){return t instanceof Klass("Vuw")&&(i||s)?(t._pt={$elm:e("<div/>").addClass("position-tracker").insertBefore(t.$self)},!!i&&(t._pt.fixStart=0),!!s&&(t._pt.fixEnd=0),t.onChangeState(function(e){var t;return app.isNumber(e.currentY)?(t=(!this._pt.fixStart||e.currentY>=this._pt.fixStart)&&(!this._pt.fixEnd||e.currentY<=this._pt.fixEnd),t!==e.isFixed&&(e.isFixed=t,this.$self.toggleClass("is-fixed",e.isFixed),this._pt.$elm.css("height",e.isFixed?this._pt.height:"")),void delete e.currentY):!1}),this._targets.push(t.getAddress()),this):!1},_updPtFixPosition:function(){var e=vuwer.$window.height();return this._targets.forEach(function(t){var i=vuwer.get(t),s=i._pt.$elm.offset().top;i._pt.height=i.$self.outerHeight(!0),i&&i.isReady&&app.isNumber(i._pt.fixStart)&&(i._pt.fixStart=s-this._ptBuffer),i&&i.isReady&&app.isNumber(i._pt.fixEnd)&&(i._pt.fixEnd=s+i._pt.height-e)},this),this},_ptBuffer:0,_calcPtBuffer:function(){return this._ptBuffer=vuwer.get("siteHeader").$self.outerHeight(!0),this},onWindowResize:function(){return this._calcPtBuffer()._updPtFixPosition()},onChangeScrollTop:function(e){return this._targets.forEach(function(t){var i=vuwer.get(t);i&&i.isReady&&i.setState("currentY",e)},this),this}},vuwer.setProp({onReadyLast:function(e){e.on("resize.pt",function(t,i){var s=e.scrollTop();!!vuwer._resizePtTimer&&clearTimeout(vuwer._resizePtTimer),vuwer._resizePtTimer=setTimeout(function(){s===e.scrollTop()&&app.positionTracker.onWindowResize()},i?0:100)}).on("scroll.pt",function(){app.positionTracker.onChangeScrollTop(e.scrollTop())}),app.enablePushState&&e.on("popstate",function(e){var t=e.originalEvent.state||app.parseQueryString(location.search);csl.log("popstate",t),t.popstate=!0,vuwer.setState(t)})}})}(window.$||window.jQuery);