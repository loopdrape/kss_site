!function(e,t){"use strict";t(e.SC,e.Klass,e.app,e.vuwer,e.jQuery||e.$)}(this,function(e,t,s,i,o){"use strict";i.add("posts",{selector:"#posts",checkLoaded:function(){var e=[];return this.$self.find("img, iframe, video").each(function(){var t=o(this);e.push(o.Deferred(function(e){return o.data(t.get(0),"timer",setTimeout(function(){t.off(".check"),e.resolve()},s.config.ajaxTimeoutTime)),t.on("load.check",function(){clearTimeout(o.data(this,"timer")),e.resolve()}),e.promise()}))}),o.when.apply(o,e).then(function(){csl.log("checkLoaded","complete")})},_addLoadListener:function(e,t){e&&e.length&s.isFunction(t)&&(e=e.eq(0),o.Deferred(function(t){return e.on("load.once",t.resolve),setTimeout(function(){e.off(".once"),t.resolve()},3e3),t.promise()}).then(function(){t.call(e.get(0))}))},createThumbnail:function(t){{var a,n;t.attr("id")}"audio"===t.data("type")&&t.hasClass("soundcloud")?!!e&&this._addLoadListener(t.find("iframe"),function(){e.Widget(this).getCurrentSound(function(e){n="url("+e.artwork_url.replace("-large","-t500x500")+")",o("<div/>").addClass("post-background").css({"background-image":n}).appendTo(t),t.children(".entry-header").prepend(o("<div/>").addClass("thumbnail").css({"background-image":n}))})}):(a=t.find("img").eq(0),a.length&&(n="url("+a.attr("src")+")",a=o("<div/>").addClass("post-background").css({"background-image":n}).appendTo(t),t.children(".entry-header").prepend(o("<div/>").addClass("thumbnail").css({"background-image":n}))))},onReady:function(e){var t=this;return e.children("script").remove(),this.checkLoaded().then(function(){/^index/.test(s.pageType)&&(t.$posts=e.children(".post").each(function(){t.createThumbnail(o(this))}),/\.top/.test(s.pageType)&&function(){var s=o("<div/>").addClass("post more-box").append(o("<a/>").addClass("load-next").attr("href","./"));s.clone().append(o("<p/>").addClass("icon-more-after").append(o("<span/>").text("more"))).insertBefore(t.$posts.eq(5)),s.append(o("<p/>").addClass("icon-arrow-after").attr({"data-arrow":"r"}).append(o("<span/>").text("more"))).insertAfter(t.$posts.eq(-1)),e.on("click",".load-next",function(e){var t=o(this).parent();t.next().length&&(e.preventDefault(),t.remove())})}())})}})});