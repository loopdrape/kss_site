!function(e,t){"use strict";t(e.Klass,e.app,e.vuwer,e.jQuery||e.$)}(this,function(e,t,i,s){"use strict";i.get("secPosts.contentsView").add("posts",{selector:"#posts",onReady:function(e){return e?(e.children("script").remove(),void this.echoThumnail(this.getAsArray(this.$self.children()))):!1},_addInnerLoaded:function(t){var i=[];return t.find("img, iframe, video").each(function(){i.push(s.Deferred(function(e){return this.onload=e.resolve.bind(e),e.promise()}.bind(this)))}),t._promise=s.Deferred(function(e){return setTimeout(e.resolve.bind(e),1e3),s.when.apply(s,i).then(e.resolve.bind(e)),e.promise()}),t.onInnerLoad=function(t){return e.isFunction(t)&&this._promise.then(t),this},this},echoThumnail:function(e){var i=[];return this.isArray(e)&&e.length&&e.forEach(function(e){var t=s(e);this.isFunction(t.onInnerLoad)||this._addInnerLoaded(t),i.push(t)},this),!!i.length&&t.thumbs.addItems(i),this},_getPosts:function(e,i){this.isString(e)&&e||i("no src."),s.ajax({url:e,timeout:t.config.ajaxTimeoutTime,type:"GET",dataType:"html"}).then(function(e){var n=s(s.parseHTML(e)).filter(this.selector);t.isFunction(i)&&i(null,this.getAsArray(n.children()))}.bind(this),function(){var e=t.ajaxErrorCallback.apply(t,arguments);t.isFunction(i)&&i(e)})},loadPosts:function(e){var t=s.Deferred();return this._getPosts(e,function(e,i){e?t.reject(e):(this.$self&&this.isArray(i)&&(s.fn.append.apply(this.$self,i),this.echoThumnail(i)),t.resolve(i))}.bind(this)),t.promise()},replacePosts:function(e){return this.$self?(this.$self.empty(),t.thumbs.clearItems(),this.loadPosts(e)):s.Deferred().reject()}},function(){t.posts=this})});