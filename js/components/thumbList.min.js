!function(e,t){"use strict";t(e.SC,e.Klass,e.app,e.vuwer,e.jQuery||e.$)}(this,function(e,t,n,i,r){"use strict";i.get("siteBody").add("thumbList",{selector:"#thumb_list",onChangeState:function(e){var t;return this.isArray(e.items)&&e.items.length?(csl.log.blue(this.name+": new items",e.items.length),t=[],e.items.forEach(function(e){var n=e.attr("id"),i=r("<li/>").attr({"data-id":n}).addClass(e.get(0).className.replace(/^post /,"")),a=e.children(".permalink").appendTo(i),s=r("<span/>").addClass("img-frame").appendTo(a),o=e.find(".entry-title").clone();o.children(".date").replaceWith(function(){return r(this).children().addClass(this.className)}),o.children().appendTo(a),e.onInnerLoad(this._createThumbnail.bind(this,e,function(e){e.appendTo(s),csl.log.gray("thumbnail: "+n)})),t.push(i)}.bind(this)),void(!!t.length&&r.fn.append.apply(this.$self,t))):!1},addItems:function(e){return this.setState({items:e})},_createThumbnail:function(n,i){n.attr("id");return r.Deferred(function(t){var i;return"audio"===n.data("type")&&n.hasClass("soundcloud")?e?(i=n.find("iframe"),i.length?e.Widget(i.get(0)).getCurrentSound(function(e){t.resolve(e.artwork_url.replace("-large","-t500x500"))}):t.reject()):t.reject():(i=n.find("img").eq(0),i.length?t.resolve(i.attr("src")):t.reject()),t.promise()}).then(function(e){var n=r("<img/>").attr({src:e,alt:"thumbnail"});t.isFunction(i)&&i(n)})}},function(){n.thumbs=this})});