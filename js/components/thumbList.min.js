!function(e,t){"use strict";t(e.SC,e.Klass,e.app,e.vuwer,e.jQuery||e.$)}(this,function(e,t,i,s,a){"use strict";s.get("siteBody").add("thumbList",{selector:"#thumb_list",onReady:function(e){!!e&&e.on("click",".permalink",function(e){e.preventDefault(),s.changePathname(this.className.indexOf("is-active")<0?this.pathname:"/")})},onChangeState:function(e){var t;return this.$self&&this.isArray(e.items)&&e.items.length?(csl.log.orange(this.name+": new items",e.items.length),t=[],e.items.forEach(function(e){var i=e.attr("id"),s=a("<li/>").attr({id:i.replace(/^post/,"thumb"),"data-id":i}).addClass(e.get(0).className.replace(/^post /,"")),n=e.children(".permalink").appendTo(s),o=a("<span/>").addClass("img-frame").appendTo(n),r=e.find(".entry-title").clone();r.children(".date").replaceWith(function(){return a(this).children().addClass(this.className)}),r.children(".date").next().length||r.append(a("<span/>").html(n.attr("href").split("/").pop())),r.children().appendTo(n),e.onInnerLoad(this._createThumbnail.bind(this,e,function(e){e.appendTo(o),csl.log.gray("thumbnail: "+i)})),t.push(s)},this),void(!!t.length&&a.fn.append.apply(this.$self,t))):!1},_createThumbnail:function(i,s){i.attr("id");return a.Deferred(function(t){var s;return"audio"===i.data("type")&&i.hasClass("soundcloud")?e?(s=i.find("iframe"),s.length?e.Widget(s.get(0)).getCurrentSound(function(e){t.resolve(e.artwork_url.replace("-large","-t500x500"))}):t.reject()):t.reject():(s=i.find("img").eq(0),s.hasClass("thumbnail")&&s.remove(),s.length?t.resolve(s.attr("src")):t.reject()),t.promise()}).then(function(e){var i=a("<img/>").attr({src:e,alt:"thumbnail"});t.isFunction(s)&&s(i)})},addItems:function(e){return this.setState({items:e})},clearItems:function(){return!!this.$self&&this.$self.empty(),this}},function(){i.thumbs=this})});