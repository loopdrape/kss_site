!function(e){"use strict";return app&&Klass("Vuw")?void vuwer.setProp({onReady:function(){}}).add("body",{selector:function(){return e(document.body)},onReady:function(e){app.pageType=[],e.hasClass("page-index")&&app.pageType.push("index"),e.hasClass("page-day")&&app.pageType.push("day"),e.hasClass("page-tag")&&app.pageType.push("tag"),e.hasClass("page-search")&&app.pageType.push("search"),e.hasClass("page-permalink")&&app.pageType.push("permalink"),app.pageType.length&&("index"===app.pageType[0]&&1===app.pageType.length?(app.pageType.push("top"),e.addClass("page-top"),app.isTop=!0):app.isTop=!1),app.pageType=app.pageType.join("."),this._addDeviceInfoClass()._initSmoothScroll()._attachHoverStatus()._attachLink4SP()},_addDeviceInfoClass:function(){var e=[];return e.push("device-"+app.device[0]),app.device.length>1&&e.push("os-"+app.device[1]),e.push("browser-"+app.browser[0]),app.browser.length>1&&e.push(app.browser.join("")),this.$self.addClass(e.join(" ")),this},_initSmoothScroll:function(){return this.$self.on("click","a",function(t){var s,o,i=this.origin;!i&&(i=this.protocol?this.protocol+"//"+this.hostname:""),!this.hash||i+this.pathname!==app.URL&&i||(t.preventDefault(),s=e.data(t.delegateTarget,"vuw"),o=e(this.hash),e("html, body").animate({scrollTop:o.offset().top-20},{complete:app.isFunction(s.smoothScrollCallBack)?function(){!!s._smoothScrollTimer&&clearTimeout(s._smoothScrollTimer),s._smoothScrollTimer=setTimeout(s.smoothScrollCallBack.bind(o),100)}:null,duration:600}))}),this},smoothScrollCallBack:function(){csl.log("scrolled.",this.offset().top)},_attachHoverStatus:function(){return vuwer.$window.on("pageshow",function(){e(".is-hover").removeClass("is-hover")}),this.hoverDecayTime="sp"===app.device[0]?250:0,this.$self.on("mouseenter touchstart","a, .hoverTarget",function(){e(this).addClass("is-hover")}).on("mouseleave touchend","a, .hoverTarget",function(t){var s=e.data(t.delegateTarget,"vuw");setTimeout(e.fn.removeClass.bind(e(this),"is-hover"),s.hoverDecayTime)}),this},_attachLink4SP:function(){return this.$self.on("click",".link4SP",function(){var t=e(this),s={href:t.data("href"),blank:"_blank"===t.data("target")?!0:!1};"sp"===app.device[0]&&(s.blank?window.open(s.href):location.href=s.href)}),this},onChangeState:function(e){"boolean"==typeof e.lockScroll&&this.$self.toggleClass("is-lock-scroll",e.lockScroll)}}).add("siteHeader",{selector:"#site_header",onReady:function(e){this.$title=e.children(".main-title"),this.$bgColor=e.find(".bg-color")},onChangeState:function(e){"anime"in e&&(this.$title.toggleClass("is-anime",!!e.anime),delete e.anime)}}).add("siteBody",{selector:"#site_body",onReady:function(){},onChangeState:function(e){this.$self.attr({"data-view":e.view||""})}}).add("scrollToPageTop",{selector:"#scroll_to_pageTop",onReady:function(){app.positionTracker.tracking(this,!0,!0)},execScroll:function(){this.$self.children(".btn-exec").trigger("click",[!0])}}).add("siteFooter",{selector:"#site_footer",onReady:function(){},fixBottom:function(){var e=this;return this.$wrap=this.$self.parent(),!!this.$wrap.length&&(this.$wrap=this.$wrap.eq(0)),"static"===this.$wrap.css("position")&&this.$wrap.css("position","relative"),this.$wrap.isBorderBox="border-box"===this.$wrap.css("box-sizing")?!0:!1,this.updStyle=function(){var e={"min-height":vuwer.$window.outerHeight()-1,"padding-bottom":this.$self.outerHeight(!0)};return this.$wrap.isBorderBox||(e["min-height"]-=e["padding-bottom"]),this.$wrap.css(e),this},this.updStyle(),vuwer.$window.on("resize",function(t,s){e._fixTimer&&clearTimeout(e._fixTimer),e._fixTimer=setTimeout(e.updStyle.bind(e),s?0:50)}),this.$self.css({position:"absolute",bottom:0,left:0}).addClass("fixed-bottom"),this}}).add("secDescription",{selector:"#sec_description",onReady:function(t){this._delay=1e3*parseFloat(t.css("transition-duration")),t.on("click",".btn-close",function(t){t.preventDefault();var s=e.data(t.delegateTarget,"vuw");s.getOther("siteBody").setState("view","").then(function(){var t=e.Deferred();return setTimeout(t.resolve,this._delay),t.promise()}.bind(this)).then(function(){s.getOther("siteBody").setState("view","posts")})})}}).add("showDescription",{selector:"#show_description",onReady:function(e){e.on("click",function(e){e.preventDefault(),vuwer.get("switchNavLinks.nav").$self.prop({checked:!1}).trigger("change",["description"])})}}):!1}(window.jQuery||window.$);