!function(e){"use strict";return app&&Klass("Vuw")?(Klass("Vuw").useVuwer(),void vuwer.setProp({onReady:function(e){e.on("resize",function(t,s){!!vuwer._resizeTimer&&clearTimeout(vuwer._resizeTimer),vuwer._resizeTimer=setTimeout(function(){vuwer.centerX=e.outerWidth()/2},s?0:100)})}}).add("body",{selector:function(){return e(document.body)},onReady:function(e){app.pageType=[],e.hasClass("page-index")&&app.pageType.push("index"),e.hasClass("page-day")&&app.pageType.push("day"),e.hasClass("page-tag")&&app.pageType.push("tag"),e.hasClass("page-search")&&app.pageType.push("search"),e.hasClass("page-permalink")&&app.pageType.push("permalink"),app.pageType.length&&("index"===app.pageType[0]&&1===app.pageType.length?(app.pageType.push("top"),e.addClass("page-top"),app.isTop=!0):app.isTop=!1),app.pageType=app.pageType.join("."),this._addDeviceInfoClass()._initSmoothScroll()._attachHoverStatus()._attachLink4SP()},_addDeviceInfoClass:function(){var e=[];return e.push("device-"+app.device[0]),app.device.length>1&&e.push("os-"+app.device[1]),e.push("browser-"+app.browser[0]),app.browser.length>1&&e.push(app.browser.join("")),this.$self.addClass(e.join(" ")),this},_initSmoothScroll:function(){return this.$self.on("click","a",function(t){var s,o,i=this.origin;!i&&(i=this.protocol?this.protocol+"//"+this.hostname:""),!this.hash||i+this.pathname!==app.URL&&i||(t.preventDefault(),s=e.data(t.delegateTarget,"vuw"),o=e(this.hash),e("html, body").animate({scrollTop:o.offset().top-20},{complete:app.isFunction(s.smoothScrollCallBack)?function(){!!s._smoothScrollTimer&&clearTimeout(s._smoothScrollTimer),s._smoothScrollTimer=setTimeout(s.smoothScrollCallBack.bind(o),100)}:null,duration:600}))}),this},smoothScrollCallBack:function(){csl.log("scrolled.",this.offset().top)},_attachHoverStatus:function(){return vuwer.$window.on("pageshow",function(){e(".is-hover").removeClass("is-hover")}),this.hoverDecayTime="sp"===app.device[0]?250:0,this.$self.on("mouseenter touchstart","a, .hoverTarget",function(){e(this).addClass("is-hover")}).on("mouseleave touchend","a, .hoverTarget",function(t){var s=e.data(t.delegateTarget,"vuw");setTimeout(e.fn.removeClass.bind(e(this),"is-hover"),s.hoverDecayTime)}),this},_attachLink4SP:function(){return this.$self.on("click",".link4SP",function(){var t=e(this),s={href:t.data("href"),blank:"_blank"===t.data("target")?!0:!1};"sp"===app.device[0]&&(s.blank?window.open(s.href):location.href=s.href)}),this},onChangeState:function(e){"boolean"==typeof e.lockScroll&&this.$self.toggleClass("is-lock-scroll",e.lockScroll)}}).add("siteHeader",{selector:"#site_header",onReady:function(e){e.on("click",".icon-keeshkas",function(e){e.preventDefault(),vuwer.$window.scrollTop()<10?vuwer.get("switchNavLinks.nav").$self.trigger("click",[!0]):vuwer.get("scrollToPageTop").execScroll()})}}).add("siteBody",{selector:"#site_body",onReady:function(){},onChangeState:function(e){this.$self.attr({"data-view":e.view||""})}}).add("siteFooter",{selector:"#site_footer",onReady:function(){},fixBottom:function(){var e=this;return this.$wrap=this.$self.parent(),!!this.$wrap.length&&(this.$wrap=this.$wrap.eq(0)),"static"===this.$wrap.css("position")&&this.$wrap.css("position","relative"),this.$wrap.isBorderBox="border-box"===this.$wrap.css("box-sizing")?!0:!1,this.updStyle=function(){var e={"min-height":vuwer.$window.outerHeight()-1,"padding-bottom":this.$self.outerHeight(!0)};return this.$wrap.isBorderBox||(e["min-height"]-=e["padding-bottom"]),this.$wrap.css(e),this},this.updStyle(),vuwer.$window.on("resize",function(t,s){e._fixTimer&&clearTimeout(e._fixTimer),e._fixTimer=setTimeout(e.updStyle.bind(e),s?0:50)}),this.$self.css({position:"absolute",bottom:0,left:0}).addClass("fixed-bottom"),this}}).add("nav",{selector:"#site_nav",onReady:function(){},onChangeState:function(t){var s={};return s.searchBox=this.get("searchBox"),s.searchBox.getState("rockOpen")!==t.isFixed?(s.methods=[],s.methods.push(s.searchBox.setState("rockOpen",!!t.isFixed)),s.btnSearch=this.get("btnSearch"),s.htmlFor=t.isFixed||s.btnSearch.getState("focus")?"search_submit":"inp_q",s.methods.push(s.btnSearch.setState("htmlFor",s.htmlFor)),e.when.apply(e,s.methods)):void 0}},function(){this.add("switchNavLinks",{selector:"#show_nav_links",onReady:function(t){this.$link=t.closest(".btn-toggle"),t.on("change",function(t,s){var o=e.data(this,"vuw"),i=app.isString(s)?s:"posts";o.setState("isChecked",this.checked),vuwer.get("body").setState("lockScroll",this.checked),vuwer.get("siteBody").setState("view",this.checked?"":i)})},onChangeState:function(e){"boolean"==typeof e.isChecked&&(this.$link.toggleClass("is-checked",!!e.isChecked),delete e.isChecked)}}).add("searchBox",{selector:"#search_box",onReady:function(t){t.on("click",".inp-txt",function(t,s){var o=e.data(t.delegateTarget,"vuw");o.setState("focus",!0),!!s&&e(this).trigger("focus",[!0])}).on("blur",".inp-txt",function(t){var s=e.data(t.delegateTarget,"vuw");s.setState("focus",!1)}),this.$inp=e("#inp_q"),this.state.focus=!1},onChangeState:function(e){this.$self.toggleClass("is-focus",e.focus).toggleClass("is-rockOpen",e.rockOpen).closest(".link-list").toggleClass("is-form-focus",e.focus)}}).add("btnSearch",{selector:function(){return this.getOther("searchBox").$self.find(".btn-search")},onReady:function(){this.state.htmlFor=this.$self.attr("for"),this.$self.on("click",function(t){var s=e.data(this,"vuw");"inp_q"===s.getState("htmlFor")&&(t.preventDefault(),s.getOther("searchBox").$inp.trigger("click",[!0]))})},onChangeState:function(e){!!e.htmlFor&&this.$self.attr("for",e.htmlFor)}})}).add("scrollToPageTop",{selector:"#scroll_to_pageTop",onReady:function(){app.positionTracker.tracking(this,!0,!0)},execScroll:function(){this.$self.children(".btn-exec").trigger("click",[!0])}}).add("secTitle",{selector:"#sec_title",onReady:function(e){this.$title=e.children(".main-title"),this.$bgColor=e.find(".bg-color")},onChangeState:function(e){"anime"in e&&(this.$title.toggleClass("is-anime",!!e.anime),delete e.anime),"slopeX"in e&&(this.$title.css({transform:"translateX("+e.slopeX*-.1+"%)"}),this.$bgColor.css({transform:"translateX("+e.slopeX*-.3+"%)"}))}}).add("secDescription",{selector:"#sec_description",onReady:function(t){this._delay=1e3*parseFloat(t.css("transition-duration")),t.on("click",".btn-close",function(t){t.preventDefault();var s=e.data(t.delegateTarget,"vuw");s.getOther("siteBody").setState("view","").then(function(){var t=e.Deferred();return setTimeout(t.resolve,this._delay),t.promise()}.bind(this)).then(function(){s.getOther("siteBody").setState("view","posts")})})}}).add("showDescription",{selector:"#show_description",onReady:function(e){e.on("click",function(e){e.preventDefault(),vuwer.get("switchNavLinks.nav").$self.prop({checked:!1}).trigger("change",["description"])})}}).add("posts",{selector:"#posts",checkLoaded:function(){var t=[];return this.$self.find("img, iframe, video").each(function(){var s=e(this);t.push(e.Deferred(function(t){return e.data(s.get(0),"timer",setTimeout(function(){s.off(".check"),t.resolve()},1e3)),s.on("load.check",function(){clearTimeout(e.data(this,"timer")),t.resolve()}),t.promise()}))}),e.when.apply(e,t).then(function(){csl.log("checkLoaded","complete")})},addLoadListener:function(t,s){t&&t.length&app.isFunction(s)&&(t=t.eq(0),e.Deferred(function(e){return t.on("load.once",e.resolve),setTimeout(function(){t.off(".once"),e.resolve()},3e3),e.promise()}).then(function(){s.call(t.get(0))}))},createThumbnail:function(t){{var i,a;t.attr("id")}"audio"===t.data("type")&&t.hasClass("soundcloud")?window.SC&&this.addLoadListener(t.find("iframe"),function(){window.SC.Widget(this).getCurrentSound(function(s){a="url("+s.artwork_url.replace("-large","-t500x500")+")",e("<div/>").addClass("post-background").css({"background-image":a}).appendTo(t),t.children(".entry-header").prepend(e("<div/>").addClass("thumbnail").css({"background-image":a}))})}):(i=t.find("img").eq(0),i.length&&(a="url("+i.attr("src")+")",i=e("<div/>").addClass("post-background").css({"background-image":a}).appendTo(t),t.children(".entry-header").prepend(e("<div/>").addClass("thumbnail").css({"background-image":a}))))},onReady:function(t){var s=this;t.children("script").remove(),/^index/.test(app.pageType)&&(s.$posts=t.children(".post").each(function(){s.createThumbnail(e(this))}),/\.top/.test(app.pageType)&&function(){var o=e("<div/>").addClass("post more-box").append(e("<a/>").addClass("load-next").attr("href","./"));o.clone().append(e("<p/>").addClass("icon-more-after").append(e("<span/>").text("more"))).insertBefore(s.$posts.eq(5)),o.append(e("<p/>").addClass("icon-arrow-after").attr({"data-arrow":"r"}).append(e("<span/>").text("more"))).insertAfter(s.$posts.eq(-1)),t.on("click",".load-next",function(t){var s=e(this).parent();s.next().length&&(t.preventDefault(),s.remove())})}())}})):!1}(window.jQuery||window.$);