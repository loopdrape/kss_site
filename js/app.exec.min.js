!function(e){"use strict";return app&&Klass("Vuw")?(app.exec=function(){e.Deferred(function(t){return e(function(){vuwer.getReady().then(t.resolve.bind(t))}),t.promise()}).then(function(){var t=Array.prototype.slice.call(arguments,0);return csl.log.blue("vuwer ready.",t),e.when(app.showLoading(),e.when.apply(e,app._execCallbacks.map(function(e){return e.apply(app,t)})))}).then(function(){var t=e.Deferred();return vuwer.get("body").$self.addClass("is-ready"),vuwer.$window.trigger("resize",[!0]),setTimeout(t.resolve.bind(t),600),t.promise()}).then(function(){vuwer.$window.trigger("scroll",[!0]),app.gaAutoSendPageview&&window.ga&&(window.ga("send","pageview"),csl.log.gray("**** send ga pageview.")),csl.log.blue("**** app ready. ****")},function(){csl.log.red("rejected.",app.getAsArray(arguments))}).always(app.hideLoading.bind(this))},app._execCallbacks=[],app.onReady=function(e){this.isFunction(e)&&this._execCallbacks.push(e)},app.positionTracker={_targets:[],tracking:function(t,s,i){if(!(t instanceof Klass("Vuw")))throw new TypeError("arguments[0] must be Vuw instance.");t._pt={$elm:e("<div/>").addClass("position-tracker").insertBefore(t.$self),buffer:t.$self.data("fix")||0},!!s&&(t._pt.fixStart=0),!!i&&(t._pt.fixEnd=0),t.onChangeState(function(e){var t;return app.isNumber(e.currentY)?(t=(!this._pt.fixStart||e.currentY>=this._pt.fixStart)&&(!this._pt.fixEnd||e.currentY<=this._pt.fixEnd),t!==e.isFixed&&(e.isFixed=t,this.$self.toggleClass("is-fixed",e.isFixed),this._pt.$elm.css("height",e.isFixed?this._pt.height:"")),void delete e.currentY):!1}),this._targets.push(t.getAddress())},_updPtFixPosition:function(){var e=vuwer.$window.height();return this._targets.forEach(function(t){var s=vuwer.get(t),i=s._pt.$elm.offset().top;s&&s.isReady&&(s._pt.height=s.$self.outerHeight(!0),app.isNumber(s._pt.fixStart)&&(s._pt.fixStart=i+s._pt.buffer),app.isNumber(s._pt.fixEnd)&&(s._pt.fixEnd=i+s._pt.height-e))},this),this},onWindowResize:function(){return this._updPtFixPosition()},onChangeScrollTop:function(e){return this._targets.forEach(function(t){var s=vuwer.get(t);s&&s.isReady&&s.setState("currentY",e)},this),this}},vuwer.onReady(function(e){e.on("resize.pt",function(t,s){var i=e.scrollTop();!!vuwer._resizePtTimer&&clearTimeout(vuwer._resizePtTimer),vuwer._resizePtTimer=setTimeout(function(){i===e.scrollTop()&&app.positionTracker.onWindowResize()},s?0:100)}).on("scroll.pt",function(){app.positionTracker.onChangeScrollTop(e.scrollTop())})}),app.showLoading=function(){return vuwer.get("siteHeader").setState("anime",!0)},app.hideLoading=function(){return vuwer.get("siteHeader").setState("anime",!1)},app.pushState=function(e,t,s){return Klass(app.klass).prototype.pushState.call(app,e,t)?(this.isObject(s)&&(s.title&&this.isString(s.title)&&(document.title=s.title),s.description&&this.isString(s.description)&&app.parts.$head.children("meta[name='description']").attr({content:s.description.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"")}),s.keywords&&this.isString(s.keywords)&&app.parts.$head.children("meta[name='keywords']").attr({content:s.keywords})),!!window.ga&&function(e){t=t.replace(new RegExp("^"+location.origin),""),e("set","page",t),e("send","pageview"),csl.log.gray("**** send ga pageview.",t)}(window.ga),this):!1},void(app.replaceState=function(e,t,s){return Klass(app.klass).prototype.replaceState.call(app,e,t)?(this.isObject(s)&&(s.title&&this.isString(s.title)&&(document.title=s.title),s.description&&this.isString(s.description)&&app.parts.$head.children("meta[name='description']").attr({content:s.description.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"")}),s.keywords&&this.isString(s.keywords)&&app.parts.$head.children("meta[name='keywords']").attr({content:s.keywords})),!!window.ga&&function(e){t=t.replace(new RegExp("^"+location.origin),""),e("set","page",t),e("send","pageview"),csl.log.gray("**** send ga pageview.",t)}(window.ga),this):!1})):!1}(window.jQuery||window.$);