!function(t){"use strict";return window.app&&app.Vue?(app.LOG=!0,function(){app.useVuer(),app.vuer.add("window",{selector:function(){return t(window)},_positionTrackings:[],positionTracking:function(e){e.onReady(function(){e.$pt=t("<div/>").addClass("position-tracker").insertBefore(e.$self),e.onChangeState(function(t){app.isNumber(t.current)&&(this.$self.toggleClass("is-fixed",t.current>=t.fixStart&&t.current<=t.fixEnd),delete t.current)}),e.setState("fixStart",parseInt(e.$pt.data("fix")))}),this._positionTrackings.push(e.name)},updPtFixEnd:function(t,e){t.setState("fixEnd",t.$pt.offset().top-e)},onScroll:function(t,e){t.setState("current",e)},onReady:function(e){e.on("resize",function(){var e=t(this),i=t.data(this,"vue"),a=e.height();i._positionTrackings.forEach(function(t){this.updPtFixEnd(this.getOther(t),a)},i)}).on("scroll",function(){var e=t(this),i=t.data(this,"vue"),a=e.scrollTop();i._positionTrackings.forEach(function(t){this.onScroll(this.getOther(t),a)},i)})}}).add("body",{selector:function(){return t(document.body)},onReady:function(t){app.isTop=function(t){return t.indexOf("page-day")<=0&&t.indexOf("page-tag")<=0&&t.indexOf("page-search")<=0&&t.indexOf("page-permalink")<=0}(t.get(0).className.split(" ")),app.isTop&&t.addClass("page-top"),this._addDeviceInfoClass()._initSmoothScroll(t)._attachHoverStatus(t)._attachLink4SP(t)},_addDeviceInfoClass:function(){var t=[];return t.push("device-"+app.device[0]),app.device.length>1&&t.push("os-"+app.device[1]),t.push("browser-"+app.browser[0]),app.browser.length>1&&t.push(app.browser.join("")),this.$self.addClass(t.join(" ")),this},_initSmoothScroll:function(e){var i=this;return e.on("click","a",function(e){var a;this.hash&&this.origin+this.pathname===app.URL&&(e.preventDefault(),a=t(this.hash),t("html, body").animate({scrollTop:a.offset().top-20},{complete:app.isFunction(i.smoothScrollCallBack)?function(){i._smoothScrollTimer&&clearTimeout(i._smoothScrollTimer),i._smoothScrollTimer=setTimeout(i.smoothScrollCallBack.bind(a),100)}:null,duration:600}))}),this},smoothScrollCallBack:function(){app.cnLog("scrolled.",this.offset().top)},_attachHoverStatus:function(e){var i=this;return i.getOther("window").$self.on("pageshow",function(){t(".is-hover").removeClass("is-hover")}),i.hoverDecayTime="sp"===app.device[0]?250:0,e.on("mouseenter touchstart","a:not(.btn), .btn, .hoverTarget",function(){t(this).addClass("is-hover")}).on("mouseleave touchend","a:not(.btn), .btn, .hoverTarget",function(){setTimeout(t.fn.removeClass.bind(t(this),"is-hover"),i.hoverDecayTime)}),this},_attachLink4SP:function(e){return e.on("click",".link4SP",function(){var e=t(this),i={href:e.data("href"),blank:"_blank"===e.data("target")?!0:!1};"sp"===app.device[0]&&(i.blank?window.open(i.href):location.href=i.href)}),this}}).add("siteHeader",{selector:"#site_header",onReady:function(e){e.on("click",".icon-keeshkas",function(e){e.preventDefault();var i=t.data(this,"target");i||(i=t("#show_nav_links"),t.data(this,"target",i)),i.trigger("click",[!0])})}}).add("siteBody",{selector:"#site_body",onReady:function(){},onChangeState:function(t){this.$self.attr({"data-view":t.view||""})}}).add("siteFooter",{selector:"#site_footer",onReady:function(){},fixBottom:function(){var t=this;return this.$wrap=this.$self.parent(),!!this.$wrap.length&&(this.$wrap=this.$wrap.eq(0)),"static"===this.$wrap.css("position")&&this.$wrap.css("position","relative"),this.$wrap.isBorderBox="border-box"===this.$wrap.css("box-sizing")?!0:!1,this.updStyle=function(){var t={"min-height":this.getOther("window").$self.outerHeight()-1,"padding-bottom":this.$self.outerHeight(!0)};return this.$wrap.isBorderBox||(t["min-height"]-=t["padding-bottom"]),this.$wrap.css(t),this},this.updStyle(),this.getOther("window").$self.on("resize",function(){t._fixTimer&&clearTimeout(t._fixTimer),t._fixTimer=setTimeout(t.updStyle.bind(t),100)}),this.$self.css({position:"absolute",bottom:0,left:0}).addClass("fixed-bottom"),this}}).add("searchBox",{selector:"#search_box",onReady:function(e){e.on("focus","input",function(e){var i=t.data(e.delegateTarget,"vue");i.setState("focus",!0)}).on("blur","input",function(e){var i=t.data(e.delegateTarget,"vue");i.setState("focus",!1)})},onChangeState:function(t){this.$self.toggleClass("is-focus",t.focus)}}).add("nav",{selector:"#site_nav",onReady:function(){this.getOther("window").positionTracking(this)}}).add("switchNavLinks",{selector:"#show_nav_links",onReady:function(e){this.$link=e.closest(".btn-toggle"),e.on("change",function(){var e=t.data(this,"vue");e.setState("isChecked",this.checked),e.getOther("siteBody").seState("view",this.checked?"":"posts")})},onChangeState:function(t){this.$link.toggleClass("is-checked",!!t.isChecked)}}).add("scrollToPageTop",{selector:"#scroll_to_pageTop",onReady:function(){this.getOther("window").positionTracking(this)}})}(),app._execCallbacks=[],app.onReady=function(t){this.isFunction(t)&&this._execCallbacks.push(t)},t.Deferred(function(e){return t(function(){app.vuer.getReady().then(e.resolve)}),e.promise()}).then(function(){var e=Array.prototype.slice.call(arguments,0);return t.when.apply(t,app._execCallbacks.map(function(t){return t.apply(this,e)},app))}).then(function(){app.vuer.get("window").$self.trigger("resize",[!0]).trigger("scroll",[!0]),app.vuer.get("body").$self.addClass("is-ready"),setTimeout(function(){app.cnLog("app ready.")},0)}),app.showLoading=function(e){var i=t.Deferred(),a=app.vuer.get("pageLoader");return a&&app.isString(e)?t.when(a.isReady?!1:a.getReady()).then(function(){a._loadingBy?(app.cnLog("  (kick showLoading "+e+")"),i.resolve()):(a._loadingBy=e,a.show(function(){app.cnLog("showLoading",[this._loadingBy]),i.resolve()}))}.bind(this)):i.resolve(),i.promise()},app.hideLoading=function(e){var i=t.Deferred(),a=app.vuer.get("pageLoader");return a&&app.isString(e)?a._loadingBy===e?a.hide(function(){app.cnLog("hideLoading",[e]),delete this._loadingBy,i.resolve()}):(app.cnLog("  (kick hideLoading "+e+")"),i.resolve()):i.resolve(),i.promise()},app.pushState=function(t,e){return window.WebAppBase.prototype.pushState.call(app,t,e)?(!!window.ga&&function(t){t("set","page",e),t("send","pageview"),app.cnLog("**** send ga pageview.",e)}(window.ga),this):!1},void(app.replaceState=function(t,e){return window.WebAppBase.prototype.replaceState.call(app,t,e)?(!!window.ga&&function(t){t("set","page",e),t("send","pageview"),app.cnLog("**** send ga pageview.",e)}(window.ga),this):!1})):!1}(window.jQuery||window.$);