!function(t){"use strict";window.app=new ApplicationBase("kss"),app.root="http://keeshkassoundservice.tumblr.com/",t(function(){app.$container=t("#container"),app.$header=t("#header"),app.$gnav=t("#gnav"),app.$contents=t("#contents"),app.$contents._fadeTime=function(){return 1e3*parseFloat(this.css("transition-duration"))}.apply(app.$contents.children(".content").eq(0)),app.$contents.toggleFade=function(e,a){var n=t.Deferred();return this.children(e).toggleClass("fadeOut",!a),setTimeout(n.resolve,this._fadeTime),n.promise()},app.$description=t("#description")}),app.enablePopState=window.history&&window.history.pushState?!0:!1,app.switchView=function(){var e=location.hash;return"#about"===e&&app.$gnav.find(".btn-about").trigger("click"),(!e||"#about"===e)&&(e="#home"),/\/post\/|\/tagged\//.test(location.href)&&(e="#posts"),app.$container.removeClass(app.$container.get(0).className.split(" ").slice(1).join(" ")).addClass(e.slice(1)),app.$contents.children(".content").addClass("hide"),t(e).removeClass("hide"),this},app._addEventListen=function(){return app.$gnav.on("click",".btn-about",function(e){e.preventDefault();var a=t(this),n=!a.hasClass("active");a.toggleClass("active",n),n?(app.$description.toggleClass("hide",!n),setTimeout(function(){app.$contents.toggleFade(".description",n),app.$container.hasClass("posts")&&app.$contents.toggleFade(".posts",!n).then(function(){app.$contents.find(".posts").toggleClass("hide",n)})},10)):(app.$contents.toggleFade(".description",n).then(function(){app.$description.toggleClass("hide",!n)}),app.$container.hasClass("posts")&&(app.$contents.find(".posts").toggleClass("hide",n),setTimeout(function(){app.$contents.toggleFade(".posts",!n)},10)))}),app.enablePopState&&function(){t(window).on("popstate",function(t){var e=t.originalEvent.state;app.cnlog("popstate",e),app.switchView()}),t("#container").on("click",".linkstate",function(t){return t.preventDefault(),this.href===location.href?!1:(history.pushState({},app.name,this.href),void app.switchView())})}.apply(app),this},t(function(){app.switchView()._addEventListen()})}(window.jQuery||window.$);