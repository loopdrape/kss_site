!function(){"use strict";function t(){this._initialize.apply(this,arguments)}var e=t.prototype={_ver:"1.1.3",name:"",ACTION_URL:"",_environment:"",_GET:{},_initialize:function(t,e){this.isString(t)?"http"===t.slice(0,4)||"."===t.slice(0,1)||"/"===t.slice(0,1)?this.ACTION_URL=t:this.name=t:"object"!=typeof t||e||(e=t),this.URL=location.origin+location.pathname,this._GET=this.parseQueryString(window.location.search),this.browser=this.__getBrowser(),this.device=this.__getDevice(),this.config={},e||(e=location.host),function(){var t,i;t=this.URL.split("/"),"object"==typeof e?(e.dev||(e.dev="dev"),e.test||(e.test="test"),e.prod||(e.prod=location.host),i=t.lastIndexOf(e.dev),this._environment="dev",0>i&&(i=t.lastIndexOf(e.test),this._environment="test",0>i&&(i=t.lastIndexOf(e.prod),this._environment="prod"))):this.isString(e)&&(i=t.lastIndexOf(e),this._environment="prod"),this.config.rootpath=t.slice(0,i+1).join("/")+"/",this.config.rootdir=t[i]}.call(this),this.config.rootpath&&function(){var e,t={};if(t.pageDirLv=this.URL.replace(this.config.rootpath,"").split("/").length,1===t.pageDirLv)this._relativePath=".";else{for(t.arr=[],t.len=t.pageDirLv-1,e=0;e<t.len;e++)t.arr.push("..");this._relativePath=t.arr.join("/")}}.call(this)},LOG:!0,cnLog:function(){if(this.LOG&&("ie"!==this.browser[0]||"8"!==this.browser[1])){var t=Array.prototype.slice.call(arguments,0);console.log.apply(console,t)}},WARN:!0,cnWarn:function(){if(this.WARN&&("ie"!==this.browser[0]||"8"!==this.browser[1])){var t=Array.prototype.slice.call(arguments,0);console.warn.apply(console,t)}},enablePushState:history&&history.pushState&&void 0!==history.state?!0:!1,pushState:function(t,e){if(this.enablePushState){try{history.pushState(t,this.name,e)}catch(i){return this.cnWarn("history.pushState",i),!1}return this}return!1},replaceState:function(t,e){if(this.enablePushState){try{history.replaceState(t,this.name,e)}catch(i){return this.cnWarn("history.replaceState",i),!1}return this}return!1},getVersion:function(){return this._ver},__getBrowser:function(){var t=window.navigator.userAgent.toLowerCase(),e=window.navigator.appVersion.toLowerCase(),i=[];return-1!=t.indexOf("msie")?(i.push("ie"),-1!=e.indexOf("msie 10.")?i.push(10):-1!=e.indexOf("msie 9.")?i.push(9):(i.push(8),i.push("under"))):-1!=t.indexOf("trident")?(i.push("ie"),i.push(11),i.push("over")):-1!=t.indexOf("chrome")?i.push("chrome"):-1!=t.indexOf("safari")?i.push("safari"):-1!=t.indexOf("opera")?i.push("opera"):-1!=t.indexOf("firefox")&&i.push("firefox"),i},__getDevice:function(){var t=window.navigator.userAgent.toLowerCase(),e=["pc"];return-1!==t.indexOf("iphone")||-1!==t.indexOf("ipad")||-1!==t.indexOf("ipod")?(e[0]="sp",e.push("ios")):-1!==t.indexOf("android ")?(e[0]="sp",e.push("android")):-1!==t.indexOf("windows phone ")&&(e[0]="sp",e.push("windows")),e},ajaxErrorCallback:function(e,i,a){this instanceof t&&"prod"!==this._environment&&this.cnWarn("通信失敗",e.responseText,e.status,i,a.message);var s="サーバーとの通信に失敗しました";return s+="<br><b>Status</b>: "+e.status,i&&(s+=" ("+i+")"),"prod"!==this._environment&&(e.responseText&&(s+="<br>"+e.responseText),a.message&&(s+="<br><br><b>Error message</b>: "+a.message)),s},zeroPadding:function(t,e){return(new Array(e).join("0")+t).slice(-e)},isObject:function(t){return"object"==typeof t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isInteger:function(t){return this.isNumber(t)&&Math.round(t)===t},isFunction:function(t){return"function"==typeof t},hasHalfKana:function(t){return this.isString(t)?/[ｦｧ-ｯｰｱ-ﾝﾞﾟ]/.test(t):(this.cnWarn("hasHalfKana","arguments[0] must be string."),!1)},hasHalfChar:function(t,e){if(!this.isString(t))return this.cnWarn("hasHalfChar","arguments[0] must be string."),!1;if(this.isNumber(e)||(e=0),!e&&this.hasHalfKana(t))return!0;var i,a,s=t.length,n=/[｡｢｣､･]/;for(a=0;s>a;a++)if(i=t.charAt(a),window.escape(i).length<6||n.test(i))return!0;return!1},hasFullChar:function(t){if(!this.isString(t))return this.cnWarn("hasFullChar","arguments[0] must be string."),!1;var e,i,a=t.length,s=/[｡｢｣､･]/;for(i=0;a>i;i++)if(e=t.charAt(i),window.escape(e).length>=6&&!s.test(e)&&!this.hasHalfKana(e))return!0;return!1},pathInfo:function(t){if(!this.isString(t))return this.cnWarn("pathInfo","arguments[0] must be string."),!1;var e={_a:document.createElement("a")};return e._a.href=t||"./",t=t.replace(e._a.search,"").replace(e._a.hash,""),e.delimiter=new RegExp("/").exec(t)?"/":"\\",e.pathParts=t.split(e.delimiter),e.basename=e.pathParts.slice(-1)[0],e.arr=e.basename.split("."),e.idx=e.arr.length-1,{dirname:e.pathParts.slice(0,-1).join("/"),basename:e.basename,extension:e.arr.length>1?e.arr[e.idx]:"",filename:e.arr.slice(0,e.idx).join("."),search:e._a.search,hash:e._a.hash}},replacePathinfo:function(t,e){if(!this.isString(t)||!this.isString(e))return t;var i=this.pathInfo(e);return t=t.replace(/\{dirname\}/g,i.dirname),t=t.replace(/\{basename\}/g,i.basename),t=t.replace(/\{extension\}/g,i.extension),t=t.replace(/\{filename\}/g,i.filename)},parseQueryString:function(t){if(!this.isString(t))return this.cnWarn("parseQueryString","arguments[0] must be string."),!1;var i,a,s,n,e={};if(t.indexOf("?")<0&&(t="?"+t),i=this.pathInfo(t).search,i=i.replace(/^\?/,""))for(i=i.split("&"),a=0;a<i.length;a++){for(n=i[a].split("="),s=0;s<n.length;s++)n[s]=decodeURIComponent(n[s]);e[n[0]]=n.slice(1).join("=")}return e},createQueryString:function(t){if("object"!=typeof t)return this.cnWarn("createQueryString","arguments[0] must be object."),!1;var a,e="",i=[];for(a in t)i.push(a+"="+encodeURIComponent(t[a]));return i.length&&(e="?"+i.join("&")),e},textareaParse:function(t,e){if(!this.isString(t))return this.cnWarn("textareaParse","arguments[0] must be string."),!1;"boolean"==typeof e||(e=!1);var o,i=t.split(/\r\n|\r|\n/),a=i.length,s=[],n=document.createElement(e?"p":"span");for(o=0;a>o;o++)i[o]||(i[o]="&nbsp;"),n.innerHTML=i[o],s.push(n.outerHTML);return s.join(e?"":"<br/>")},preloadedImgs:{},imgPreload:function(t,e){var i=this,a=this.preloadedImgs,s=new Image;s.src=t,s.onerror=function(a){i.cnWarn("preload error: "+t),e(!1,t,s,a)},s.onload=function(i){a[t]=s,"function"==typeof e&&e(!0,t,s,i)}},newCall:function(t){return new(Function.prototype.bind.apply(t,arguments))},inherits:function(t,e){if(void 0===t||null===t)throw new TypeError("The constructor to `inherits` must not be null or undefined.");if(void 0===e||null===e)throw new TypeError("The super constructor to `inherits` must not be null or undefined.");if(void 0===e.prototype)throw new TypeError("The super constructor to `inherits` must have a prototype.");t.super_=e,Object.setPrototypeOf(t.prototype,e.prototype)}};!function(){e._scrollTop=0,e.saveScroll=function(t){return this.isNumber(t)||(t=window.pageYOffset),this._scrollTop=t,this},e.loadScroll=function(){return window.scrollTo(window.pageXOffset,this._scrollTop),this},e.setScroll=function(t){return this.isNumber(t)?window.scrollTo(window.pageXOffset,t):this.cnWarn(String(t)+"isn't Number."),this}}(),window.WebAppBase=t,function(t){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,a=function(){},s=function(){return i.apply(this instanceof a&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,s.prototype=new a,s}),Object.assign||(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(void 0!==a&&null!==a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=i.length;return function(s){if("object"!=typeof s&&"function"!=typeof s||null===s)throw new TypeError("Object.keys called on non-object");var n=[];for(var o in s)t.call(s,o)&&n.push(o);if(e)for(var r=0;a>r;r++)t.call(s,i[r])&&n.push(i[r]);return n}}()),Object.setPrototypeOf||(Object.defineProperty&&("ie"!==t[0]||parseInt(t[1])>8)?Object.defineProperty(Object,"setPrototypeOf",{value:function(t,e){t.__proto__=e},writable:!0,configurable:!0}):Object.setPrototypeOf=function(t,e){t.__proto__=e}),Object.getPrototypeOf||(Object.defineProperty&&("ie"!==t[0]||parseInt(t[1])>8)?Object.defineProperty(Object,"getPrototypeOf",{value:function(t){return t.__proto__},writable:!0,configurable:!0}):Object.getPrototypeOf=function(t){return t.__proto__}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var a=0;if(arguments.length>0&&(a=Number(arguments[1]),a!=a?a=0:0!==a&&1/0!=a&&a!=-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=i)return-1;for(var s=a>=0?a:Math.max(i-Math.abs(a),0);i>s;s++)if(s in e&&e[s]===t)return s;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var a=i;arguments.length>1&&(a=Number(arguments[1]),a!=a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a))));for(var s=a>=0?Math.min(a,i-1):i-Math.abs(a);s>=0;s--)if(s in e&&e[s]===t)return s;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,a;if(null===this)throw new TypeError("this is null or not defined");var s=Object(this),n=s.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(i=e),a=0;n>a;){var o;Object.prototype.hasOwnProperty.call(s,a)&&(o=s[a],t.call(i,o,a,s)),a++}}),Array.prototype.map||(Array.prototype.map=function(t,e){var i,a,s;if(null===this)throw new TypeError(" this is null or not defined");var n=Object(this),o=n.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(i=e),a=new Array(o),s=0;o>s;){var r,p;s in n&&(r=n[s],p=t.call(i,r,s,n),a[s]=p),s++}return a}),Array.prototype.filter||(Array.prototype.filter=function(t){if(null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var a=[],s=arguments[1],n=0;i>n;n++)if(n in e){var o=e[n];t.call(s,o,n,e)&&a.push(o)}return a}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.now||(Date.now=function(){return(new Date).getTime()}),location.origin||(location.origin=location.protocol+"//"+location.hostname),window.console||(window.console={}),"function"!=typeof window.console.log&&(window.console.log=function(){})}(e.__getBrowser())}();