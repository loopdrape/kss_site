!function(e,t){"use strict";e.Klass=t()}(this,function(){"use strict";var e,t,r;e=function(){},e.prototype={isObject:function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e},isArray:function(e){return Array.isArray(e)},isBoolean:function(e){return"boolean"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isInteger:function(e){return this.isNumber(e)&&Math.round(e)===e},isFunction:function(e){return"function"==typeof e},isElement:function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},getAsArray:function(e){return Array.prototype.slice.call(e,0)}},t=function(e){if(void 0===e)return Object.assign({},t._klassMap);if(!t.isString(e))throw new TypeError("arguments[0] must be string.");return t._klassMap[e]};for(r in e.prototype)t[r]=e.prototype[r];return t.inherits=function(e,t){if(void 0===e||null===e)throw new TypeError("The constructor to `inherits` must not be null or undefined.");if(void 0===t||null===t)throw new TypeError("The super constructor to `inherits` must not be null or undefined.");if(void 0===t.prototype)throw new TypeError("The super constructor to `inherits` must have a prototype.");return e.super_=t,"function"==typeof Object.__proto__?Object.setPrototypeOf(e.prototype,t.prototype):this.goog.inherits(e,t),this},t.isFunction(Object.__proto__)||(t.goog={inherits:function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),t._klassMap={Klass:e},e.prototype.klass="Klass",t.extends_=function(e,t,r){var s;if(!this.isString(t))throw new TypeError("arguments[1] must be string.");if(s=this._klassMap[t],!s)throw new Error("'"+t+"' is undefined.");return this.inherits(e,s),e.parent=s.prototype,this.isObject(r)&&Object.keys(r).forEach(function(t){e.prototype[t]=this[t]},r),e},t.create=function(e,t){var r;if(!this.isString(e))throw new TypeError("arguments[0] must be string.");if(this._klassMap[e])throw new Error("'"+e+"' is already defined.");return this.isObject(t)||(t={}),r=function(){this._initialize.apply(this,arguments)},r.extends_=function(e,t){return window.Klass.extends_(this,e,t)},this._klassMap[e]=r,Object.keys(t).length&&(!t._initialize&&(t._initialize=function(){}),this.extends_(r,"Klass",t)),r.prototype.klass=e,r},t.new_=function(e){var t=Array.prototype.slice.call(arguments,0);if(!this.isString(e))throw new TypeError("arguments[0] must be string.");return t[0]=this(e),new(Function.prototype.bind.apply(t[0],t))},t}),function(e,t){"use strict";e.csl=t(e.Klass)}(this,function(e){"use strict";return e.create("Console",{_initialize:function(){return this.off("log").off("warn")},colors:{blue:"#0862b1",green:"#0c861a",orange:"#de6d0b",red:"#e2291e",purple:"#920ea5",gray:"#aaa",grey:"#aaa"},_attachColors:function(t,r){var s=this[t],n="ie"===e("Console").browser[0];return Object.keys(this.colors).forEach(function(e){s[e]=r?n?console[t].bind(console):console[t].bind(console,"%c%s","color:"+this[e]+";"):function(){}},this.colors),this},on:function(e){if(!this.isString(e))throw new TypeError("arguments[0] must be string.");return this.isFunction(console[e])?(this[e]=console[e].bind(console),["log","warn"].indexOf(e)>=0&&this._attachColors(e,!0)):this.off(e),this},off:function(e){if(!this.isString(e))throw new TypeError("arguments[0] must be string.");return this[e]=function(){},["log","warn"].indexOf(e)>=0&&this._attachColors(e,!1),this}}),function(e){e.browser=function(){var e=window.navigator.userAgent.toLowerCase(),t=window.navigator.appVersion.toLowerCase(),r=[];return-1!=e.indexOf("msie")?(r.push("ie"),-1!=t.indexOf("msie 10.")?r.push(10):-1!=t.indexOf("msie 9.")?r.push(9):(r.push(8),r.push("under"))):-1!=e.indexOf("trident")?(r.push("ie"),r.push(11),r.push("over")):-1!=e.indexOf("chrome")?r.push("chrome"):-1!=e.indexOf("safari")?r.push("safari"):-1!=e.indexOf("opera")?r.push("opera"):-1!=e.indexOf("firefox")&&r.push("firefox"),r}(),e.device=function(){var e=window.navigator.userAgent.toLowerCase(),t=["pc"];return-1!==e.indexOf("iphone")||-1!==e.indexOf("ipad")||-1!==e.indexOf("ipod")?(t[0]="sp",t.push("ios")):-1!==e.indexOf("android ")?(t[0]="sp",t.push("android")):-1!==e.indexOf("windows phone ")&&(t[0]="sp",t.push("windows")),t}()}(e("Console")),e.new_("Console")}),function(e,t){"use strict";e.WebAppBase=t(e.Klass,e.csl)}(this,function(e,t){"use strict";return e.create("WebAppBase",{_ver:"2.3",name:"",ACTION_URL:"",_environment:"",_GET:{},browser:e("Console").browser,device:e("Console").device,_initialize:function(e,t){this.isString(e)?"http"===e.slice(0,4)||"."===e.slice(0,1)||"/"===e.slice(0,1)?this.ACTION_URL=e:this.name=e:this.isObject(e)&&!t&&(t=e),this.URL=location.origin+location.pathname,this._GET=this.parseQueryString(location.search),this.config={},this.setRootDir(t||location.host)},cnLog:function(){return t.log.apply(this,arguments)},cnWarn:function(){return t.warn.apply(this,arguments)},getVersion:function(){return this._ver},setRootDir:function(e){var t,r;if(t=this.URL.split("/"),this.isObject(e))e.dev||(e.dev="dev"),e.test||(e.test="test"),e.prod||(e.prod=location.host),r=t.lastIndexOf(e.dev),this._environment="dev",0>r&&(r=t.lastIndexOf(e.test),this._environment="test",0>r&&(r=t.lastIndexOf(e.prod),this._environment="prod"));else{if(!this.isString(e))throw new TypeError("arguments[0] must be object or string.");r=t.lastIndexOf(e),this._environment="prod"}return this.config.rootpath=t.slice(0,r+1).join("/")+"/",this.config.rootdir=t[r],this.currentPath=this.URL.replace(new RegExp("^"+this.config.rootpath.replace(/\/$/,"")),""),function(){var t,e={};if(e.pageDirLv=this.URL.replace(new RegExp("^"+this.config.rootpath),"").split("/").length,1===e.pageDirLv)this._relativePath=".";else{for(e.arr=[],e.len=e.pageDirLv-1,t=0;t<e.len;t++)e.arr.push("..");this._relativePath=e.arr.join("/")}}.call(this),this},enablePushState:history&&history.pushState&&void 0!==history.state?!0:!1,pushState:function(e,r){if(this.enablePushState){try{history.pushState(e,this.name,r)}catch(s){return t.warn("history.pushState",s),!1}return this}return!1},replaceState:function(e,r){if(this.enablePushState){try{history.replaceState(e,this.name,r)}catch(s){return t.warn("history.replaceState",s),!1}return this}return!1},ajaxErrorCallback:function(r,s,n){this instanceof e("WebAppBase")&&"prod"!==this._environment&&t.warn("通信失敗",r.responseText,r.status,s,n.message);var i="サーバーとの通信に失敗しました";return i+="<br><b>Status</b>: "+r.status,s&&(i+=" ("+s+")"),"prod"!==this._environment&&(r.responseText&&(i+="<br>"+r.responseText),n.message&&(i+="<br><br><b>Error message</b>: "+n.message)),i},preloadedImgs:{},imgPreload:function(e,t){var r=this,s=this.preloadedImgs,n=new Image;n.src=e,n.onerror=function(s){r.cnWarn("preload error: "+e),t(!1,e,n,s)},n.onload=function(r){s[e]=n,"function"==typeof t&&t(!0,e,n,r)}},getJSON:function(t,r){var s;if(!t)throw new TypeError("arguments error.");/\.json$/.test(t)||(t+=".json"),/^\/(?!\/)/.test(t)&&(t=this._relativePath+t),s=new XMLHttpRequest,s.onloadend=function(){200===this.status&&e.isFunction(r)&&r(JSON.parse(this.responseText),this)},s.open("GET",t,!0),s.send()},require:function(e,t,r,s){var n;if(!e)throw new TypeError("arguments error.");return this.isObject(t)||(t={success:t}),this.isFunction(t.success)||(t.success=null),!r&&(r=function(e){return e=document.getElementsByTagName("script"),e[e.length-1]}.call(this)),this.isString(e)?(/\.js$/.test(e)||(e+=".js"),/^\/(?!\/)/.test(e)&&(e=this._relativePath+e),n=document.createElement("script"),n.src=e,n.async=1,this.isObject(t.attr)&&Object.keys(t.attr).forEach(function(e){this.isString(t.attr[e])&&n.setAttribute(e,t.attr[e])},this),this.isFunction(t.success)&&(n.onload=t.success),this.isFunction(t.error)&&(n.onerror=t.error),r.parentNode.insertBefore(n,r.nextSibling)):this.isArray(e)?this.isNumber(s)&&e[s]?this.require(e[s],t,r):(n={count:0,len:e.length},n.cb={},this.isFunction(t.success)&&(n.cb.success=function(){n.count++,n.count===n.len&&t.success.call(r||this)}),this.isFunction(t.error)&&(n.cb.error=t.error),e.forEach(function(e){this.require(e,n.cb,r),r=r.nextSibling},this)):this.isObject(e)&&(this.isArray(e.sync)?((!this.isNumber(s)||0>s)&&(s=0),n={_self:this,success:function(){s++,e.sync[s]?n._self.require(e,t,this,s):n._self.isFunction(t.success)&&t.success.call(this)}},this.isFunction(t.error)&&(n.error=t.error),this.require(e.sync[s],n,r)):e.match?(n={flg:!1},this.isString(e.match)?(n.literal=new RegExp(e.match),n.literal.test(this.currentPath)&&(n.flg=!0)):this.isArray(e.match)&&(n.matches=0,e.match.forEach(function(e){n.literal=new RegExp(e),n.literal.test(this.currentPath)&&n.matches++},this),n.flg=e.and?n.matches===e.match.length:!!n.matches),n.flg?e.then?this.require(e.then,t,r):this.isFunction(t.success)&&t.success.call(r):e["else"]?this.require(e["else"],t,r):this.isFunction(t.success)&&t.success.call(r)):this.isString(e.path)&&(n={_self:this},this.isFunction(t.success)&&(n.success=t.success),e.fallback&&this.isString(e.fallback)?n.error=function(){n._self.require(e.fallback,t,this)}:this.isFunction(t.error)&&(n.error=t.error),this.isObject(e.attr)&&(n.attr=e.attr),this.require(e.path,n,r))),this},writeHTML:function(e,t,r,s){var n=new XMLHttpRequest,i=/\{root\}/g;!s&&(s=function(e){return e=document.getElementsByTagName("script"),e[e.length-1]}.call(this)),i.test(e)?e=e.replace(i,this._relativePath):/^\/(?!\/)/.test(e)?e=this._relativePath+e:/^\./.test(e)||(e=this._relativePath+"/"+e),"boolean"!=typeof t&&(t=!0),r===!1&&(e+="?_="+String((new Date).valueOf())),n.onloadend=function(e){200===e.target.status&&s.insertAdjacentHTML("afterend",e.target.responseText.replace(i,this._relativePath))}.bind(this),n.open("GET",e,t),n.send(null)},zeroPadding:function(e,t){return(new Array(t).join("0")+e).slice(-t)},hasHalfKana:function(e){return this.isString(e)?/[ｦｧ-ｯｰｱ-ﾝﾞﾟ]/.test(e):(t.warn("hasHalfKana","arguments[0] must be string."),!1)},hasHalfChar:function(e,r){if(!this.isString(e))return t.warn("hasHalfChar","arguments[0] must be string."),!1;if(this.isNumber(r)||(r=0),!r&&this.hasHalfKana(e))return!0;var s,n,i=e.length,o=/[｡｢｣､･]/;for(n=0;i>n;n++)if(s=e.charAt(n),escape(s).length<6||o.test(s))return!0;return!1},hasFullChar:function(e){if(!this.isString(e))return t.warn("hasFullChar","arguments[0] must be string."),!1;var r,s,n=e.length,i=/[｡｢｣､･]/;for(s=0;n>s;s++)if(r=e.charAt(s),escape(r).length>=6&&!i.test(r)&&!this.hasHalfKana(r))return!0;return!1},fileSizeToString:function(e){if(!this.isNumber(e))return t.warn("pathInfo","arguments[0] must be number."),!1;var r=e/1024;return r>=1024?(r/=1024,r=r>=1024?String(Math.ceil(r/1024))+"GB":String(Math.ceil(r))+"MB"):r=String(Math.ceil(r))+"KB",r},pathInfo:function(e){if(!this.isString(e))return t.warn("pathInfo","arguments[0] must be string."),!1;var r={_a:document.createElement("a")};return r._a.href=e||"./",e=e.replace(r._a.search,"").replace(r._a.hash,""),r.delimiter=new RegExp("/").exec(e)?"/":"\\",r.pathParts=e.split(r.delimiter),r.basename=r.pathParts.slice(-1)[0],r.arr=r.basename.split("."),r.idx=r.arr.length-1,{dirname:r.pathParts.slice(0,-1).join("/"),basename:r.basename,extension:r.arr.length>1?r.arr[r.idx]:"",filename:r.arr.slice(0,r.idx).join("."),search:r._a.search,hash:r._a.hash}},replacePathinfo:function(e,t){if(!this.isString(e)||!this.isString(t))return e;var r=this.pathInfo(t);return e=e.replace(/\{dirname\}/g,r.dirname),e=e.replace(/\{basename\}/g,r.basename),e=e.replace(/\{extension\}/g,r.extension),e=e.replace(/\{filename\}/g,r.filename)},parseQueryString:function(e){if(!this.isString(e))return t.warn("parseQueryString","arguments[0] must be string."),!1;var s,n,i,o,r={};if(e.indexOf("?")<0&&(e="?"+e),s=this.pathInfo(e).search,s=s.replace(/^\?/,""))for(s=s.split("&"),n=0;n<s.length;n++){for(o=s[n].split("="),i=0;i<o.length;i++)o[i]=decodeURIComponent(o[i]);r[o[0]]=o.slice(1).join("=")}return r},createQueryString:function(e){if("object"!=typeof e)return t.warn("createQueryString","arguments[0] must be object."),!1;var n,r="",s=[];for(n in e)s.push(n+"="+encodeURIComponent(e[n]));return s.length&&(r="?"+s.join("&")),r},textareaParse:function(e,r){if(!this.isString(e))return t.warn("textareaParse","arguments[0] must be string."),!1;"boolean"==typeof r||(r=!1);var a,s=e.split(/\r\n|\r|\n/),n=s.length,i=[],o=document.createElement(r?"p":"span");for(a=0;n>a;a++)s[a]||(s[a]="&nbsp;"),o.innerHTML=s[a],i.push(o.outerHTML);return i.join(r?"":"<br/>")},_scrollTop:0,saveScroll:function(e){return this.isNumber(e)||(e=window.pageYOffset),this._scrollTop=e,this},loadScroll:function(){return window.scrollTo(window.pageXOffset,this._scrollTop),this},setScroll:function(e){return this.isNumber(e)?window.scrollTo(window.pageXOffset,e):t.warn(String(e)+"isn't Number."),this},encodeRFC:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},decodeRFC:function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},newCall:function(e){return new(Function.prototype.bind.apply(e,arguments))}})});