!function(e,t){"use strict";return e?t?(e.Component=function(){this._initialize.apply(this,arguments)},e.Component.prototype={_ver:"1.0.0",$elm:!1,_initialize:function(e,t){var n={name:"",selector:"",onReady:function(){},onChangeState:function(){},render:function(){}};return delete n.onReady,delete n.onChangeState,delete n.render,"object"==typeof t&&Object.assign(n,t),!n.name&&(n.name=String((new Date).valueOf())),this._wAB=e,this.isReady=!1,this.state={},this.renderItem=!1,this._onReadyCallbacks=[],n.onReady&&(this.onReady(n.onReady),delete n.onReady),this._onChangeStateCallbacks=[],n.onChangeState&&(this.onChangeState(n.onChangeState),delete n.onChangeState),this.setProp(n)},setProp:function(e,t,n){return e?this._wAB.isString(e)?this._setProp(e,t,!!n):"object"==typeof e&&(n=t===!0,e.onReady&&(this.onReady(e.onReady),delete e.onReady),e.onChangeState&&(this.onChangeState(e.onChangeState),delete e.onChangeState),Object.keys(e).forEach(function(t){this._setProp(t,e[t],n)},this)):this._wAB.cnWarn((this.name||"Component")+".setProp() ... arguments[0] is required."),this},_setProp:function(e,t,n){return this.hasOwnProperty(e)&&!n?this._wAB.cnWarn((this.name||"Component")+".setProp() ... '"+e+"' is already defined."):this[e]=t,this},getReady:function(){var n,e=t.Deferred();return this.isReady?(this._wAB.cnLog("** "+this.name+".getReady() is already executed."),e.resolve().promise()):this.isGettingReady?(this._wAB.cnLog("** "+this.name+" is getting ready now..."),e.resolve().promise()):(this.isGettingReady=!0,!!this.selector&&function(){var e;this._wAB.isString(this.selector)?e=t(this.selector):this._wAB.isFunction(this.selector)&&(e=this.selector.call(this)),e&&e instanceof t&&e.length&&(this.$elm=e)}.call(this),n=this._onReadyCallbacks.map(function(e){return e.call(this,this.$elm)},this),t.when.apply(t,n).then(function(){this.isReady=!0,delete this.isGettingReady,e.resolve.apply(e,Array.prototype.slice.call(arguments,0))}.bind(this),e.reject.bind(e)),e.promise())},onReady:function(e){return this._wAB.isFunction(e)&&(this.isReady?e.call(this,this.$elm):this._onReadyCallbacks.push(e)),this},changeState:function(){var n,e=t.Deferred();return n=this._onChangeStateCallbacks.map(function(e){return e.call(this,this.state)},this),t.when.apply(t,n).then(function(){this.renderItem=this.render(),e.resolve()}.bind(this)),e.promise()},onChangeState:function(e){return this._wAB.isFunction(e)&&this._onChangeStateCallbacks.push(e),this},setState:function(e,t){var n=!1;return this.isReady?e?this._wAB.isString(e)?(this.state[e]=t,n=!0):"object"==typeof e&&(Object.assign(this.state,e),n=!0):this._wAB.cnWarn(this.name+".setState() ... arguments[0] is required."):this._wAB.cnWarn(this.name+".setState() ... getReady() didn't execute yet."),n&&(this.changeState(),!!this.$elm&&this.$elm.trigger("changeState")),this},getState:function(e){return this.isReady?e&&this._wAB.isString(e)?this.state[e]:this.state:(this._wAB.cnWarn(this.name+".getState() ... getReady() didn't execute yet."),!1)},render:function(){}},e.initComponent=function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(this.Component,this),this.newCall.apply(this,e)},void(e.useComponents=function(){return this.components={_wAB:this,_map:{},isReady:!1,getReady:function(){var n,e=t.Deferred();return this.isReady?(this._wAB.cnLog("** components.getReady() is already executed."),this):(n=Object.keys(this._map).map(function(e){return this._map[e]instanceof this._wAB.Component?this._map[e].getReady():void 0},this),t.when.apply(t,n).then(function(){var t=Object.keys(this._map),n={};Array.prototype.slice.call(arguments,0).forEach(function(e,i){Array.isArray(e)&&(e=e.filter(function(e){return!!e}),!e.length&&(e=void 0)),void 0===e||(n[t[i]]=e)}),this.isReady=!0,e.resolve(n)}.bind(this),e.reject.bind(e)),e.promise())},add:function(e,t,n){var i;return this._wAB.isString(e)?e in this._map&&!n?(this._wAB.cnWarn("components.add() ... '"+e+"' is already defined."),this):("object"==typeof t||(t={}),Object.assign(t,{name:e,_components:this,getComponents:function(){return this._components},getOther:function(e){return this.getComponents().get(e)}}),i=this._wAB.initComponent(t),this._map[i.name]=i,this):(this._wAB.cnWarn("components.add() ... arguments[0] is must be string.",typeof e),this)},get:function(e){return this._map[e]},render:function(){}},this})):(console.warn("'$' isn't included."),!1):(console.warn("'WAB' isn't included."),!1)}(window.WebAppBase.prototype,window.jQuery||window.$);